extends ../layouts/application.pug

block header 
  h1=t('layouts.application.tasks')
  a.btn.btn-primary(href=route('newTasks'))=t('views.tasks.actions.create')

block content
  .my-5.p-4.card
    form(action='/tasks', method="GET")
      .row
        .col-12.col-md
          .input-group.mb-3
            label(class='input-group-text', for='data_status')=t('views.tasks.status')
            select(name='status', id='data_status').form-select
              option=''
              each status in statuses
                option(value=status.id)=status.name
        .col-12.col-md
          .input-group.mb-3
            label(class='input-group-text', for='data_executor')=t('views.tasks.executor')
            select(name='executor', id='data_executor').form-select
              option=''
              each user in users
                option(value=user.id)=user.firstName
        .col-12.col-md
          .input-group.mb-3
            label(class='input-group-text', for='data_label')=t('views.tasks.label')
            select(name='label', id='data_label').form-select
              option=''
              each label in labels
                option(value=label.id)=label.name
      .form-check
        input(class='form-check-input', type='checkbox', value='', id='data_my_tasks')
        label(class='form-check-label', for='data_my_tasks')=t('views.tasks.only_my_tasks')
      .row
        .input-group.mt-3
          input(class='btn btn-primary', type='submit' value=t('views.tasks.actions.show'))

  table.bg-white.table.table-striped.mt-5
    thead
      tr
        th= t('views.tasks.id')
        th= t('views.tasks.name')
        th= t('views.tasks.status')
        th= t('views.tasks.author')
        th= t('views.tasks.executor')
        th= t('views.tasks.createdAt')
        th= t('')
    tbody
      each task in tasks
        tr
          td= task.id
          td
            a(href=`/tasks/${task.id}`)=task.name
          td= task.statusId
          td= task.creatorId
          td= task.executorId
          td= formatDate(task.createdAt)
          td.d-flex
            a(href=`/tasks/${task.id}/edit` class='btn btn-primary me-1')=t('views.tasks.actions.edit')
            +buttonTo(`/tasks/${task.id}`, 'DELETE')(value=t('views.tasks.actions.delete')).btn.btn-danger